---
- debug: msg="Starting network compliance management test"
- debug: msg="Role Path {{ role_path }}"

- block:
  - name: Load vars and declare dnac vars
    include_vars:
      file: "{{ role_path }}/vars/vars_network_compliance_management.yml"
      name: vars_map
    vars:
      dnac_login: &dnac_login
        dnac_host: "{{ dnac_host }}"
        dnac_username: "{{ dnac_username }}"
        dnac_password: "{{ dnac_password }}"
        dnac_verify: "{{ dnac_verify }}"
        dnac_port: "{{ dnac_port }}"
        dnac_version: "{{ dnac_version }}"
        dnac_debug: "{{ dnac_debug }}"
        dnac_log: True
        dnac_log_level: DEBUG
        config_verify: True

  # - debug:
  #     msg: "{{ vars_map. }}"


#############################################
#      Run Full Compliance on IP List       #
#############################################

  - name: Run full complaince check 
    cisco.dnac.network_compliance_workflow_manager:
      <<: *dnac_login
      dnac_log_append: False
      config:
        - ip_address_list: ['204.1.2.2']
          #ip_address_list: ['204.1.2.2', '204.1.2.5', '204.1.2.4']
          #ip_address_list: ['204.1.2.2','204.1.2.4' ]
          site_name: "Global"
          #run_compliance: True
          run_compliance: False
          #run_compliance:
          run_compliance_categories: ['INTENT']
          #sync_device_config: True

#############################################
#        Run Full Compliance on Site        #
#############################################
  
#   - name: Run full complaince check on Site
#     cisco.dnac.network_compliance_workflow_manager:
#       <<: *dnac_login
#       dnac_log_append: False
#       config:
#         - site: "Global"
#           run_compliance:
#              trigger_full: True
       
# #############################################
# # Run Compliance with Categories on IP List #
# #############################################

#   - name: Run complaince check with specific categories on IP list
#     cisco.dnac.network_compliance_workflow_manager:
#       <<: *dnac_login
#       dnac_log_append: False
#       config:
#         - #ip_address_list: ['204.1.2.5']
#           ip_address_list: ['204.1.2.2', '204.1.2.5', '204.1.2.4']
#           run_compliance:
#              trigger_full: False
#              categories: ['INTENT', 'RUNNING_CONFIG' , 'IMAGE' , 'PSIRT']

# #############################################
# #   Run Compliance with Categories on Site  #
# #############################################

#   - name:  Run Compliance with Categories on Site
#     cisco.dnac.network_compliance_workflow_manager:
#       <<: *dnac_login
#       dnac_log_append: False
#       config:
#         - site_name: "Global"
#           run_compliance:
#              trigger_full: False
#              categories: ['INTENT', 'RUNNING_CONFIG' , 'IMAGE' , 'PSIRT']

# #############################################
# #       Sync Device Config on IP List       #
# #############################################

#   - name: Sync Device Config on IP List
#     cisco.dnac.network_compliance_workflow_manager:
#       <<: *dnac_login
#       dnac_log_append: False
#       config:
#         - #ip_address_list: ['204.1.2.5']
#           ip_address_list: ['204.1.2.2', '204.1.2.5', '204.1.2.4']
#           sync_device_config: True

# #############################################
# #         Sync Device Config on Site        #
# #############################################

#   - name: Sync Device Config on Site
#     cisco.dnac.network_compliance_workflow_manager:
#       <<: *dnac_login
#       dnac_log_append: False
#       config:
#         - site_name: "Global"
#           sync_device_config: True

#  